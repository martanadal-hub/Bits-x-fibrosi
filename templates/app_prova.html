<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictor de Malalties Respiratòries</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom right, #dceefe, #b3d4fc);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 16px;
        }
        .card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
            padding: 20px;
            text-align: center;
        }
        .card-header {
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 28px;
            font-weight: bold;
            color: #345fbe;
        }
        .label {
            display: block;
            font-size: 16px;
            color: #1e40af;
            margin-bottom: 8px;
        }
        .input {
            width: 80%;
            padding: 8px;
            font-size: 14px;
            border: 2px solid #93c5fd;
            border-radius: 4px;
            margin-bottom: 16px;
        }
        .button {
            width: 80%;
            padding: 8px;
            background: #345fbe;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .button:hover {
            background: #1d4ed8;
        }
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            text-align: left;
            margin-bottom: 20px;
        }
        .radio-option {
            display: flex;
            align-items: center;
        }
        .radio-option input {
            margin-right: 8px;
        }
        .slider-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .slider {
            width: 80%;
            margin: 10px 0;
        }
        .header-img {
            margin-bottom: 20px;
        }
        .user-info {
            font-size: 16px;
            font-weight: bold;
            color: #000;
            margin-bottom: 16px;
        }
        .error-message {
            color: #dc2626;
            margin-top: 8px;
            font-size: 14px;
            display: none;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="card-header">
            <img src="{{ url_for('static', filename='images/logo-marato.png') }}" alt="La Marató Logo" width="300" height="auto" id="marato-image">
            <p style="color: #2563eb; font-weight: 800;">Investigació en Malalties Respiratòries</p>
        </div>
        <div class="card-body">
            <!-- Formulari inicial per al codi d'usuari -->
            <div id="step-1">
                <img src="{{ url_for('static', filename='images/malalties-respiratories.jpg') }}" alt="A Ple Pulmó" style="width: 100%; max-width: 200px; margin: 0 auto; display: block;" id="pulmo-image">
                <label class="label" for="codNumber">Introdueix el teu Codi d'Usuari</label>
                <input type="text" id="codNumber" class="input" placeholder="Codi d'usuari">
                <p class="error-message" id="user-error">Si us plau, introdueix el teu codi d'usuari.</p>
                <button type="button" id="continue-button-1" class="button">Continuar</button>
            </div>

            <!-- Formulari principal, ocult inicialment -->
            <div id="step-2" class="hidden">
                <p class="user-info" id="user-info">Usuari: </p>
                <h2 class="card-title">Informació Personal</h2>
                
                <!-- Pedigree -->
                <div class="form-group">
                    <label class="label" for="pedigree">Quin és el número de pedigrí d'aquest pacient?</label>
                    <input type="number" id="pedigree" class="input" name="Pedigree" placeholder="Introdueix un número">
                    <p class="error-message" id="pedigree-error">Si us plau, introdueix el número de pedigrí.</p>
                </div>

                <!-- Sexe -->
                <div class="form-group">
                    <label class="label" for="sex">Quin és el gènere del pacient?</label>
                    <select id="sex" class="input" name="sex">
                        <option value="">Selecciona</option>
                        <option value="Male">Home</option>
                        <option value="Female">Dona</option>
                    </select>
                    <p class="error-message" id="sex-error">Si us plau, selecciona el gènere del pacient.</p>
                </div>

                <!-- Edat al Diagnòstic -->
                <div class="form-group">
                    <label class="label" for="age-diagnosis">Quina és l'edat del pacient?</label>
                    <input type="number" id="age-diagnosis" class="input" name="Age at diagnosis" placeholder="Introdueix un número">
                    <p class="error-message" id="age-diagnosis-error">Si us plau, introdueix l'edat del pacient.</p>
                </div>

                <p class="error-message" id="form-error-step-2">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-2" class="button">Continuar</button>
                <button type="button" id="back-button-2" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Tercera Secció: Diagnòstic i Historial de Tabaquisme -->
            <div id="step-3" class="hidden">
                <p class="user-info" id="user-info-step-3">Usuari: </p>
                <h2 class="card-title">Diagnòstic i Historial de Tabaquisme</h2>

                <!-- Diagnòstic Final -->
                <div class="form-group">
                    <label class="label" for="final-diagnosis">Quin és el diagnòstic final del pacient?</label>
                    <input type="number" id="final-diagnosis" class="input" name="FinalDiagnosis" placeholder="Introdueix un número">
                    <p class="error-message" id="final-diagnosis-error">Si us plau, introdueix el diagnòstic final del pacient.</p>
                </div>

                <!-- Historial de Tabaquisme -->
                <div class="form-group">
                    <label class="label" for="tobacco-history">El pacient té antecedents de tabaquisme?</label>
                    <select id="tobacco-history" class="input" name="TobaccoHistory">
                        <option value="">Selecciona</option>
                        <option value="No history of smoking">Sense antecedents de tabaquisme</option>
                        <option value="Active smoker">Fumador actiu</option>
                        <option value="Ex-smoker">Ex-fumador</option>
                    </select>
                    <p class="error-message" id="tobacco-error">Si us plau, selecciona l'historial de tabaquisme del pacient.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-3">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-3" class="button">Continuar</button>
                <button type="button" id="back-button-3" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Quarta Secció: Informació Radiològica i de Biopsia -->
            <div id="step-4" class="hidden">
                <p class="user-info" id="user-info-step-4">Usuari: </p>
                <h2 class="card-title">Informació Radiològica i de Biopsia</h2>

                <!-- Patró Radiològic -->
                <div class="form-group">
                    <label class="label" for="radiological-pattern">Quin és el patró radiològic observat en el pacient?</label>
                    <select id="radiological-pattern" class="input" name="RadiologicalPattern">
                        <option value="">Selecciona</option>
                        <option value="UIP">UIP</option>
                        <option value="Probable UIP">Probable UIP</option>
                        <option value="Non UIP">Non UIP</option>
                        <option value="Indeterminate UIP">Indeterminate UIP</option>
                    </select>
                    <p class="error-message" id="radiological-pattern-error">Si us plau, selecciona el patró radiològic del pacient.</p>
                </div>

                <!-- Biopsia -->
                <div class="form-group">
                    <label class="label" for="biopsy">Quin és el tipus de biopsia realitzada al pacient?</label>
                    <select id="biopsy" class="input" name="Biopsy">
                        <option value="">Selecciona</option>
                        <option value="biopsy-none">Sense biopsia</option>
                        <option value="biopsy-endoscopic">Criobiopsia endoscòpica</option>
                        <option value="biopsy-surgical">Biopsia quirúrgica</option>
                    </select>
                    <p class="error-message" id="biopsy-error">Si us plau, selecciona el tipus de biopsia realitzada.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-4">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-4" class="button">Continuar</button>
                <button type="button" id="back-button-4" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-5: Extrapulmonary Manifestations -->
            <div id="step-5" class="hidden">
                <p class="user-info" id="user-info-step-5">Usuari: </p>
                <h2 class="card-title">Manifestacions Extrapulmonars</h2>

                <!-- Extrapulmonary Affectation -->
                <div class="form-group">
                    <label class="label" for="Extrapulmonary">El pacient té manifestacions extrapulmonars?</label>
                    <select id="Extrapulmonary" class="input" name="Extrapulmonary">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="extrapulmonary-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-5">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-5" class="button">Continuar</button>
                <button type="button" id="back-button-5" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-6: Cancer History -->
            <div id="step-6" class="hidden">
                <p class="user-info" id="user-info-step-6">Usuari: </p>
                <h2 class="card-title">Historial de Càncer</h2>

                <!-- Associated Lung Cancer -->
                <div class="form-group">
                    <label class="label" for="LungCancer">El pacient té càncer pulmonar associat?</label>
                    <select id="LungCancer" class="input" name="LungCancer">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="lungcancer-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Other Cancer -->
                <div class="form-group">
                    <label class="label" for="OtherCancer">El pacient té historial d'altres càncers?</label>
                    <select id="OtherCancer" class="input" name="OtherCancer">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="othercancer-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Neoplasia Type -->
                <div class="form-group" id="NeoplasiaTypeGroup">
                    <label class="label" for="NeoplasiaType">Selecciona el tipus de neoplasia.</label>
                    <p style="color: #2563eb; font-weight: 300;">Manté presionada la tecla Ctrl (Windows) o Cmd (macOS) per seleccionar múltiples opcions.</p>
                    <select id="NeoplasiaType" class="input" name="NeoplasiaType[]" multiple size="10">
                        <option value="Kaposi Sarcoma">Kaposi Sarcoma</option>
                        <option value="Lung ADK">Lung ADK</option>
                        <option value="Cervical cancer">Cervical cancer</option>
                        <option value="Prostate ADK">Prostate ADK</option>
                        <option value="Lymphoma">Lymphoma</option>
                        <option value="Bladder Carcinoma">Bladder Carcinoma</option>
                        <option value="Testicular cancer">Testicular cancer</option>
                        <option value="Oropharyngeal Carcinoma">Oropharyngeal Carcinoma</option>
                        <option value="Melanoma">Melanoma</option>
                        <option value="Giant B-cell lymphoma">Giant B-cell lymphoma</option>
                        <option value="Basocellular Carcinoma">Basocellular Carcinoma</option>
                        <option value="Unknown pulmonary nodule">Unknown pulmonary nodule</option>
                        <option value="Small-Cell Lung Cancer">Small-Cell Lung Cancer</option>
                        <option value="Breast cancer">Breast cancer</option>
                        <option value="Liver cancer">Liver cancer</option>
                        <option value="Prostate Cancer">Prostate Cancer</option>
                        <option value="GI cancer">GI cancer</option>
                        <option value="Bladder Cancer">Bladder Cancer</option>
                        <option value="Squamous cell oropharyngeal cancer">Squamous cell oropharyngeal cancer</option>
                        <option value="Sigmoid ADK">Sigmoid ADK</option>
                        <option value="No">Cap</option>

                    </select>
                    <p class="error-message" id="neoplasia-error">Si us plau, selecciona almenys un tipus de neoplasia.</p>
                </div>                

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-6">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-6" class="button">Continuar</button>
                <button type="button" id="back-button-6" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-7: Hematological Abnormalities -->
            <div id="step-7" class="hidden">
                <p class="user-info" id="user-info-step-7">Usuari: </p>
                <h2 class="card-title">Anormalitats Hematològiques</h2>

                <!-- Hematological Abnormality Before Diagnosis -->
                <div class="form-group">
                    <label class="label" for="HematologicAbnormalities">El pacient tenia anormalitats hematològiques abans del diagnòstic?</label>
                    <select id="HematologicAbnormalities" class="input" name="HematologicAbnormalities">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="hematologic-abnormalities-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Blood Count Abnormalities -->
                <div class="form-group">
                    <label class="label" for="BloodCountAbnormalities">Selecciona les anormalitats en el recull de sang observades en el pacient:</label>
                    <p style="color: #2563eb; font-weight: 300;">Manté presionada la tecla Ctrl (Windows) o Cmd (macOS) per seleccionar múltiples opcions.</p>
                    <select id="BloodCountAbnormalities" class="input" name="BloodCountAbnormalities[]" multiple size="9">
                        <option value="anemia">Anèmia</option>
                        <option value="thrombocytopenia">Trombocitopenia</option>
                        <option value="thrombocytosis">Trombocitosi</option>
                        <option value="lymphocytosis">Linfocitosi</option>
                        <option value="lymphopenia">Linfopenia</option>
                        <option value="neutrophilia">Neutrofília</option>
                        <option value="neutropenia">Neutropènia</option>
                        <option value="leukocytosis">Leucocitosi</option>
                        <option value="leukopenia">Leucopenia</option>
                    </select>
                    <p class="error-message" id="bloodcount-error">Si us plau, selecciona almenys una opció.</p>
                </div>

                <!-- Hematologic Disease - Confirmació -->
                <div class="form-group">
                    <label class="label" for="HematologicDiseaseConfirm">El pacient té alguna malaltia hematològica?</label>
                    <select id="HematologicDiseaseConfirm" class="input" name="HematologicDiseaseConfirm">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="hematologic-confirm-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-7">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-7" class="button">Continuar</button>
                <button type="button" id="back-button-7" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-8: Liver Function -->
            <div id="step-8" class="hidden">
                <p class="user-info" id="user-info-step-8">Usuari: </p>
                <h2 class="card-title">Funció Hepàtica</h2>

                <!-- Liver Abnormality Before Diagnosis -->
                <div class="form-group">
                    <label class="label" for="LiverAbnormalityBefore">El pacient tenia alguna anormalitat hepàtica abans del diagnòstic?</label>
                    <select id="LiverAbnormalityBefore" class="input" name="LiverAbnormalityBefore">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="liverabnormalitybefore-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Liver Abnormality -->
                <div class="form-group">
                    <label class="label" for="LiverAbnormality">El pacient té anormalitats hepàtiques actuals?</label>
                    <select id="LiverAbnormality" class="input" name="LiverAbnormality">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="liverabnormality-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Liver Disease -->
                <div class="form-group">
                    <label class="label" for="LiverDisease">El pacient té alguna malaltia hepàtica?</label>
                    <select id="LiverDisease" class="input" name="LiverDisease">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="liverdisease-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Liver Function Tests -->
                <div class="form-group">
                    <label class="label" for="liverfunctiontests">Quines són els valors dels següents proves de funció hepàtica?</label>
                    <div style="text-align: left; margin-left: 10%;">
                        <!-- LDH -->
                        <label class="label" for="LDH">LDH:</label>
                        <select id="LDH" class="input" name="LDH">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="LDH-error">Si us plau, selecciona una opció per a LDH.</p>

                        <!-- ALT -->
                        <label class="label" for="ALT">ALT:</label>
                        <select id="ALT" class="input" name="ALT">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="ALT-error">Si us plau, selecciona una opció per a ALT.</p>

                        <!-- AST -->
                        <label class="label" for="AST">AST:</label>
                        <select id="AST" class="input" name="AST">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="AST-error">Si us plau, selecciona una opció per a AST.</p>

                        <!-- ALP -->
                        <label class="label" for="ALP">ALP:</label>
                        <select id="ALP" class="input" name="ALP">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="ALP-error">Si us plau, selecciona una opció per a ALP.</p>

                        <!-- GGT -->
                        <label class="label" for="GGT">GGT:</label>
                        <select id="GGT" class="input" name="GGT">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="GGT-error">Si us plau, selecciona una opció per a GGT.</p>

                        <!-- Transaminitis -->
                        <label class="label" for="Transaminitis">Transaminitis:</label>
                        <select id="Transaminitis" class="input" name="Transaminitis">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="Transaminitis-error">Si us plau, selecciona una opció per a Transaminitis.</p>

                        <!-- Colestàsia -->
                        <label class="label" for="Cholestasis">Colestàsia:</label>
                        <select id="Cholestasis" class="input" name="Cholestasis">
                            <option value="">Selecciona</option>
                            <option value="normal">Normal</option>
                            <option value="anormal">Anormal</option>
                        </select>
                        <p class="error-message" id="Cholestasis-error">Si us plau, selecciona una opció per a Colestàsia.</p>
                    </div>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-8">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-8" class="button">Continuar</button>
                <button type="button" id="back-button-8" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-9: Lung Function Tests -->
            <div id="step-9" class="hidden">
                <p class="user-info" id="user-info-step-9">Usuari: </p>
                <h2 class="card-title">Proves de Funció Pulmonar</h2>

                <!-- FVC (%) at diagnosis -->
                <div class="form-group">
                    <label class="label" for="FVC">Quina és la FVC (%) del pacient al moment del diagnòstic?</label>
                    <input type="number" id="FVC" class="input" name="FVC" placeholder="Introdueix FVC (%)">
                    <p class="error-message" id="FVC-error">Si us plau, introdueix la FVC del pacient.</p>
                </div>

                <!-- DLCO (%) at diagnosis -->
                <div class="form-group">
                    <label class="label" for="DLCO">Quina és la DLCO (%) del pacient al moment del diagnòstic?</label>
                    <input type="number" id="DLCO" class="input" name="DLCO" placeholder="Introdueix DLCO (%)">
                    <p class="error-message" id="DLCO-error">Si us plau, introdueix la DLCO del pacient.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-9">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-9" class="button">Continuar</button>
                <button type="button" id="back-button-9" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-10: Family History -->
            <div id="step-10" class="hidden">
                <p class="user-info" id="user-info-step-10">Usuari: </p>
                <h2 class="card-title">Historial Familiar</h2>

                <!-- 1st Degree Relative -->
                <div class="form-group">
                    <label class="label" for="FirstDegreeRelative">El pacient té algun familiar de primer grau amb condicions similars?</label>
                    <select id="FirstDegreeRelative" class="input" name="FirstDegreeRelative">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="firstdegree-relative-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- 2nd Degree Relative -->
                <div class="form-group">
                    <label class="label" for="SecondDegreeRelative">El pacient té algun familiar de segon grau amb condicions similars?</label>
                    <select id="SecondDegreeRelative" class="input" name="SecondDegreeRelative">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="seconddegree-relative-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- More Than One Relative -->
                <div class="form-group">
                    <label class="label" for="MoreThanOneRelative">El pacient té més d'un familiar amb condicions similars?</label>
                    <select id="MoreThanOneRelative" class="input" name="MoreThanOneRelative">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="morethanonerelative-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-10">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-10" class="button">Continuar</button>
                <button type="button" id="back-button-10" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-11: Genetic Information -->
            <div id="step-11" class="hidden">
                <p class="user-info" id="user-info-step-11">Usuari: </p>
                <h2 class="card-title">Informació Genètica</h2>

                <!-- Genetic Mutation Studied -->
                <div class="form-group">
                    <label class="label" for="GeneticMutation">S'ha identificat alguna mutació genètica en el pacient?</label>
                    <select id="GeneticMutation" class="input" name="GeneticMutation">
                        <option value="">Selecciona</option>
                        <option value="no">No</option>
                        <option value="yes">Sí</option>
                    </select>
                    <p class="error-message" id="genetic-mutation-error">Si us plau, selecciona una opció.</p>
                </div>

                <!-- Severity of Telomere Shortening -->
                

                <div class="form-group">
                    <label class="label" for="TelomereShorteningSeverity">Quina és la severitat de l'escorçament de telòmeres en el pacient?</label>
                    <input type="number" id="TelomereShorteningSeverity" class="input" name="TelomereShorteningSeverity" placeholder="Introdueix la severitat d'escorçament">
                    <p class="error-message" id="telomere-severity-error">Si us plau, introdueix la severitat d'escorçament del pacient.</p>
                </div>

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-11">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="continue-button-11" class="button">Continuar</button>
                <button type="button" id="back-button-11" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>

            <!-- Step-12: Confirmació i Enviament -->
            <div id="step-12" class="hidden">
                <p class="user-info" id="user-info-step-12">Usuari: </p>
                <h2 class="card-title">Confirmació</h2>
                <p>Revisa les teves respostes abans d'enviar-les.</p>
                <!-- Aquí podríem afegir una revisió de totes les dades si es desitja -->

                <!-- Missatge d'error general del formulari -->
                <p class="error-message" id="form-error-step-12">Si us plau, completa tots els camps requerits.</p>

                <button type="button" id="submit-button-final" class="button">Enviar</button>
                <button type="button" id="back-button-12" class="button" style="background: #6b7280; margin-top: 10px;">Enrere</button>
            </div>
        </div>
    </div>

    <script>
        // Definició de totes les seccions
        const step1 = document.getElementById('step-1');
        const step2 = document.getElementById('step-2');
        const step3 = document.getElementById('step-3');
        const step4 = document.getElementById('step-4');
        const step5 = document.getElementById('step-5');
        const step6 = document.getElementById('step-6');
        const step7 = document.getElementById('step-7');
        const step8 = document.getElementById('step-8');
        const step9 = document.getElementById('step-9');
        const step10 = document.getElementById('step-10');
        const step11 = document.getElementById('step-11');
        const step12 = document.getElementById('step-12');

        // Definició de tots els botons de continuar
        const continueButton1 = document.getElementById('continue-button-1');
        const continueButton2 = document.getElementById('continue-button-2');
        const continueButton3 = document.getElementById('continue-button-3');
        const continueButton4 = document.getElementById('continue-button-4');
        const continueButton5 = document.getElementById('continue-button-5');
        const continueButton6 = document.getElementById('continue-button-6');
        const continueButton7 = document.getElementById('continue-button-7');
        const continueButton8 = document.getElementById('continue-button-8');
        const continueButton9 = document.getElementById('continue-button-9');
        const continueButton10 = document.getElementById('continue-button-10');
        const continueButton11 = document.getElementById('continue-button-11');

        // Definició de tots els botons de tornar enrere
        const backButton2 = document.getElementById('back-button-2');
        const backButton3 = document.getElementById('back-button-3');
        const backButton4 = document.getElementById('back-button-4');
        const backButton5 = document.getElementById('back-button-5');
        const backButton6 = document.getElementById('back-button-6');
        const backButton7 = document.getElementById('back-button-7');
        const backButton8 = document.getElementById('back-button-8');
        const backButton9 = document.getElementById('back-button-9');
        const backButton10 = document.getElementById('back-button-10');
        const backButton11 = document.getElementById('back-button-11');
        const backButton12 = document.getElementById('back-button-12');

        // Definició dels inputs i missatges d'error
        const codNumberInput = document.getElementById('codNumber');
        const userError = document.getElementById('user-error');

        const pedigreeInput = document.getElementById('pedigree');
        const sexInput = document.getElementById('sex');
        const ageDiagnosisInput = document.getElementById('age-diagnosis');
        const pedigreeError = document.getElementById('pedigree-error');
        const sexError = document.getElementById('sex-error');
        const ageDiagnosisError = document.getElementById('age-diagnosis-error');
        const formErrorStep2 = document.getElementById('form-error-step-2');

        const finalDiagnosisInput = document.getElementById('final-diagnosis');
        const tobaccoHistoryInput = document.getElementById('tobacco-history');
        const finalDiagnosisError = document.getElementById('final-diagnosis-error');
        const tobaccoError = document.getElementById('tobacco-error');
        const formErrorStep3 = document.getElementById('form-error-step-3');

        const radiologicalPatternInput = document.getElementById('radiological-pattern');
        const biopsyInput = document.getElementById('biopsy');
        const radiologicalPatternError = document.getElementById('radiological-pattern-error');
        const biopsyError = document.getElementById('biopsy-error');
        const formErrorStep4 = document.getElementById('form-error-step-4');

        const ExtrapulmonaryInput = document.getElementById('Extrapulmonary');
        const formErrorStep5 = document.getElementById('form-error-step-5');

        const LungCancerInput = document.getElementById('LungCancer');
        const OtherCancerInput = document.getElementById('OtherCancer');
        const NeoplasiaTypeInput = document.getElementById('NeoplasiaType');
        const NeoplasiaTypeGroup = document.getElementById('NeoplasiaTypeGroup');
        const neoplasiaError = document.getElementById('neoplasia-error');
        const formErrorStep6 = document.getElementById('form-error-step-6');

        const HematologicAbnormalitiesInput = document.getElementById('HematologicAbnormalities');
        const BloodCountAbnormalitiesInput = document.getElementById('BloodCountAbnormalities');
        const hematologicConfirmSelect = document.getElementById('HematologicDiseaseConfirm');
        const HematologicDiseaseTypesGroup = document.getElementById('HematologicDiseaseTypesGroup');
        const hematologicAbnormalitiesError = document.getElementById('hematologic-abnormalities-error');
        const bloodcountError = document.getElementById('bloodcount-error');
        const hematologicConfirmError = document.getElementById('hematologic-confirm-error');
        const hematologicTypesError = document.getElementById('hematologic-types-error');
        const formErrorStep7 = document.getElementById('form-error-step-7');

        const LiverAbnormalityBeforeInput = document.getElementById('LiverAbnormalityBefore');
        const LiverAbnormalityInput = document.getElementById('LiverAbnormality');
        const LiverDiseaseInput = document.getElementById('LiverDisease');
        const LDHInput = document.getElementById('LDH');
        const ALTInput = document.getElementById('ALT');
        const ASTInput = document.getElementById('AST');
        const ALPInput = document.getElementById('ALP');
        const GGTInput = document.getElementById('GGT');
        const TransaminitisInput = document.getElementById('Transaminitis');
        const CholestasisInput = document.getElementById('Cholestasis');
        const liverabnormalitybeforeError = document.getElementById('liverabnormalitybefore-error');
        const liverabnormalityError = document.getElementById('liverabnormality-error');
        const liverdiseaseError = document.getElementById('liverdisease-error');
        const LDHError = document.getElementById('LDH-error');
        const ALTError = document.getElementById('ALT-error');
        const ASTError = document.getElementById('AST-error');
        const ALPError = document.getElementById('ALP-error');
        const GGTError = document.getElementById('GGT-error');
        const TransaminitisError = document.getElementById('Transaminitis-error');
        const CholestasisError = document.getElementById('Cholestasis-error');
        const formErrorStep8 = document.getElementById('form-error-step-8');

        const FVCInput = document.getElementById('FVC');
        const DLCOInput = document.getElementById('DLCO');
        const FVCError = document.getElementById('FVC-error');
        const DLCOError = document.getElementById('DLCO-error');
        const formErrorStep9 = document.getElementById('form-error-step-9');

        const FirstDegreeRelativeInput = document.getElementById('FirstDegreeRelative');
        const SecondDegreeRelativeInput = document.getElementById('SecondDegreeRelative');
        const MoreThanOneRelativeInput = document.getElementById('MoreThanOneRelative');
        const firstdegreeRelativeError = document.getElementById('firstdegree-relative-error');
        const seconddegreeRelativeError = document.getElementById('seconddegree-relative-error');
        const morethanonerelativeError = document.getElementById('morethanonerelative-error');
        const formErrorStep10 = document.getElementById('form-error-step-10');

        const GeneticMutationInput = document.getElementById('GeneticMutation');
        const geneticMutationError = document.getElementById('genetic-mutation-error');
        const mutationTypeError = document.getElementById('mutation-type-error');
        const TelomereShorteningSeverityInput = document.getElementById('TelomereShorteningSeverity');
        const telomereSeverityError = document.getElementById('telomere-severity-error');
        const formErrorStep11 = document.getElementById('form-error-step-11');

        const submitButtonFinal = document.getElementById('submit-button-final');
        const formErrorStep12 = document.getElementById('form-error-step-12');
        const extrapulmonaryError = document.getElementById('extrapulmonary-error');

        // Funció per mostrar una secció i ocultar les altres
        function showStep(stepToShow) {
            [step1, step2, step3, step4, step5, step6, step7, step8, step9, step10, step11, step12].forEach(step => {
                if (step === stepToShow) {
                    step.classList.remove('hidden');
                } else {
                    step.classList.add('hidden');
                }
            });
        }

        // Actualitzar el text d'usuari en totes les seccions
        function updateUserInfo(userCode) {
            const userInfoElements = document.querySelectorAll('.user-info');
            userInfoElements.forEach(element => {
                element.textContent = `Usuari: ${userCode}`;
            });
        }

        // Continuar des de la primera secció a la segona
        continueButton1.addEventListener('click', () => {
            const userCode = codNumberInput.value.trim();
            if (userCode) {
                userError.style.display = 'none';
                updateUserInfo(userCode);
                showStep(step2);
            } else {
                userError.style.display = 'block';
            }
        });

        // Continuar des de la segona secció a la tercera
        continueButton2.addEventListener('click', () => {
            let isValid = true;

            // Validar Pedigree
            const pedigree = pedigreeInput.value.trim();
            if (!pedigree) {
                pedigreeError.style.display = 'block';
                isValid = false;
            } else {
                pedigreeError.style.display = 'none';
            }

            // Validar Sexe
            const sex = sexInput.value;
            if (!sex) {
                sexError.style.display = 'block';
                isValid = false;
            } else {
                sexError.style.display = 'none';
            }

            // Validar Edat al Diagnòstic
            const ageDiagnosis = ageDiagnosisInput.value.trim();
            if (!ageDiagnosis) {
                ageDiagnosisError.style.display = 'block';
                isValid = false;
            } else {
                ageDiagnosisError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep2.style.display = 'none';
                showStep(step3);
            } else {
                formErrorStep2.style.display = 'block';
            }
        });

        // Continuar des de la tercera secció a la quarta
        continueButton3.addEventListener('click', () => {
            let isValid = true;

            // Validar Diagnòstic Final
            const finalDiagnosis = finalDiagnosisInput.value.trim();
            if (!finalDiagnosis) {
                finalDiagnosisError.style.display = 'block';
                isValid = false;
            } else {
                finalDiagnosisError.style.display = 'none';
            }

            // Validar Historial de Tabaquisme
            const tobaccoHistory = tobaccoHistoryInput.value;
            if (!tobaccoHistory) {
                tobaccoError.style.display = 'block';
                isValid = false;
            } else {
                tobaccoError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep3.style.display = 'none';
                showStep(step4);
            } else {
                formErrorStep3.style.display = 'block';
            }
        });

        // Continuar des de la quarta secció a la cinquena
        continueButton4.addEventListener('click', () => {
            let isValid = true;

            // Validar Patró Radiològic
            const radiologicalPattern = radiologicalPatternInput.value;
            if (!radiologicalPattern) {
                radiologicalPatternError.style.display = 'block';
                isValid = false;
            } else {
                radiologicalPatternError.style.display = 'none';
            }

            // Validar Biopsia
            const biopsy = biopsyInput.value;
            if (!biopsy) {
                biopsyError.style.display = 'block';
                isValid = false;
            } else {
                biopsyError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep4.style.display = 'none';
                showStep(step5);
            } else {
                formErrorStep4.style.display = 'block';
            }
        });

        // Continuar des de la cinquena secció a la sisena
        continueButton5.addEventListener('click', () => {
            let isValid = true;

            // Validar Extrapulmonary Affectation
            const extrapulmonary = ExtrapulmonaryInput.value;
            if (!extrapulmonary) {
                extrapulmonaryError.style.display = 'block';
                isValid = false;
            } else {
                extrapulmonaryError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep5.style.display = 'none';
                showStep(step6);
            } else {
                formErrorStep5.style.display = 'block';
            }
        });

        // Continuar des de la sisena secció a la setena
        continueButton6.addEventListener('click', () => {
            let isValid = true;

            // Validar Lung Cancer
            const lungCancer = LungCancerInput.value;
            if (!lungCancer) {
                formErrorStep6.style.display = 'block';
                isValid = false;
            } else {
                formErrorStep6.style.display = 'none';
            }

            // Validar Other Cancer
            const otherCancer = OtherCancerInput.value;
            if (!otherCancer) {
                formErrorStep6.style.display = 'block';
                isValid = false;
            } else {
                formErrorStep6.style.display = 'none';
            }

            // Si OtherCancer és "sí", validar NeoplasiaType
            const selectedOptions = Array.from(NeoplasiaTypeInput.selectedOptions).map(option => option.value);
            if (selectedOptions.length === 0) {
                neoplasiaError.style.display = 'block';
                NeoplasiaTypeInput.style.borderColor = '#dc2626';
                isValid = false;
            } else {
                neoplasiaError.style.display = 'none';
                NeoplasiaTypeInput.style.borderColor = '#93c5fd';
            } 

            if (isValid) {
                formErrorStep6.style.display = 'none';
                showStep(step7);
            } else {
                formErrorStep6.style.display = 'block';
            }
        });

        // Continuar des de la setena secció a l'oitava
        continueButton7.addEventListener('click', () => {
            let isValid = true;

            // Validar Hematological Abnormalities
            const hematologicAbnormalities = HematologicAbnormalitiesInput.value;
            if (!hematologicAbnormalities) {
                hematologicAbnormalitiesError.style.display = 'block';
                isValid = false;
            } else {
                hematologicAbnormalitiesError.style.display = 'none';
            }

            // Validar Blood Count Abnormalities
            const bloodCountAbnormalities = Array.from(BloodCountAbnormalitiesInput.selectedOptions).map(option => option.value);
            if (bloodCountAbnormalities.length === 0) {
                bloodcountError.style.display = 'block';
                BloodCountAbnormalitiesInput.style.borderColor = '#dc2626';
                isValid = false;
            } else {
                bloodcountError.style.display = 'none';
                BloodCountAbnormalitiesInput.style.borderColor = '#93c5fd';
            }

            // Validar la confirmació
            const hematologicConfirm = hematologicConfirmSelect.value;
            if (!hematologicConfirm) {
                hematologicConfirmError.style.display = 'block';
                hematologicConfirmSelect.style.borderColor = '#dc2626';
                isValid = false;
            } else {
                hematologicConfirmError.style.display = 'none';
                hematologicConfirmSelect.style.borderColor = '#93c5fd';
            }

            if (isValid) {
                formErrorStep7.style.display = 'none';
                showStep(step8);
            } else {
                formErrorStep7.style.display = 'block';
            }
        });

        // Continuar des de l'oitava secció a la novena
        continueButton8.addEventListener('click', () => {
            let isValid = true;

            // Validar Liver Abnormality Before Diagnosis
            const liverAbnormalityBefore = LiverAbnormalityBeforeInput.value;
            if (!liverAbnormalityBefore) {
                liverabnormalitybeforeError.style.display = 'block';
                isValid = false;
            } else {
                liverabnormalitybeforeError.style.display = 'none';
            }

            // Validar Liver Abnormality
            const liverAbnormality = LiverAbnormalityInput.value;
            if (!liverAbnormality) {
                liverabnormalityError.style.display = 'block';
                isValid = false;
            } else {
                liverabnormalityError.style.display = 'none';
            }

            // Validar Liver Disease
            const liverDisease = LiverDiseaseInput.value;
            if (!liverDisease) {
                liverdiseaseError.style.display = 'block';
                isValid = false;
            } else {
                liverdiseaseError.style.display = 'none';
            }

            // Validar Liver Function Tests (cada camp)
            const liverTests = ['LDH', 'ALT', 'AST', 'ALP', 'GGT', 'Transaminitis', 'Cholestasis'];
            liverTests.forEach(test => {
                const testInput = document.getElementById(test);
                const errorElement = document.getElementById(`${test}-error`);
                if (!testInput.value) {
                    errorElement.style.display = 'block';
                    testInput.style.borderColor = '#dc2626';
                    isValid = false;
                } else {
                    errorElement.style.display = 'none';
                    testInput.style.borderColor = '#93c5fd';
                }
            });

            if (isValid) {
                formErrorStep8.style.display = 'none';
                showStep(step9);
            } else {
                formErrorStep8.style.display = 'block';
            }
        });

        // Continuar des de la novena secció a la desena
        continueButton9.addEventListener('click', () => {
            let isValid = true;

            // Validar FVC
            const FVC = FVCInput.value.trim();
            if (!FVC) {
                FVCError.style.display = 'block';
                isValid = false;
            } else {
                FVCError.style.display = 'none';
            }

            // Validar DLCO
            const DLCO = DLCOInput.value.trim();
            if (!DLCO) {
                DLCOError.style.display = 'block';
                isValid = false;
            } else {
                DLCOError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep9.style.display = 'none';
                showStep(step10);
            } else {
                formErrorStep9.style.display = 'block';
            }
        });

        // Continuar des de la desena secció a la undesena
        continueButton10.addEventListener('click', () => {
            let isValid = true;

            // Validar Family History
            const firstDegree = FirstDegreeRelativeInput.value;
            const secondDegree = SecondDegreeRelativeInput.value;
            const moreThanOneRelative = MoreThanOneRelativeInput.value;

            if (!firstDegree) {
                firstdegreeRelativeError.style.display = 'block';
                isValid = false;
            } else {
                firstdegreeRelativeError.style.display = 'none';
            }

            if (!secondDegree) {
                seconddegreeRelativeError.style.display = 'block';
                isValid = false;
            } else {
                seconddegreeRelativeError.style.display = 'none';
            }

            if (!moreThanOneRelative) {
                morethanonerelativeError.style.display = 'block';
                isValid = false;
            } else {
                morethanonerelativeError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep10.style.display = 'none';
                showStep(step11);
            } else {
                formErrorStep10.style.display = 'block';
            }
        });

        // Continuar des de la undesena secció a la duodèsima
        continueButton11.addEventListener('click', () => {
            let isValid = true;

            // Validar Genetic Mutation
            const geneticMutation = GeneticMutationInput.value;
            if (!geneticMutation) {
                geneticMutationError.style.display = 'block';
                isValid = false;
            } else {
                geneticMutationError.style.display = 'none';
            }

            // Validar Severity of Telomere Shortening
            const telomereSeverity = TelomereShorteningSeverityInput.value;
            if (!telomereSeverity) {
                telomereSeverityError.style.display = 'block';
                isValid = false;
            } else {
                telomereSeverityError.style.display = 'none';
            }

            if (isValid) {
                formErrorStep11.style.display = 'none';
                showStep(step12);
            } else {
                formErrorStep11.style.display = 'block';
            }
        });

        // Enviar el formulari des de la duodèsima secció
        submitButtonFinal.addEventListener('click', async () => {
            // Reunir totes les dades
            const otherCancer = OtherCancerInput.value; // Definir `otherCancer` correctament
            const formData = {
                usuari: codNumberInput.value.trim(),
                Pedigree: pedigreeInput.value.trim(),
                sex: sexInput.value,
                'Age at diagnosis': ageDiagnosisInput.value.trim(),
                FinalDiagnosis: finalDiagnosisInput.value,
                TobaccoHistory: tobaccoHistoryInput.value,
                RadiologicalPattern: radiologicalPatternInput.value,
                Biopsy: biopsyInput.value,
                Extrapulmonary: ExtrapulmonaryInput.value,
                LungCancer: LungCancerInput.value,
                OtherCancer: OtherCancerInput.value,
                NeoplasiaType: Array.from(NeoplasiaTypeInput.selectedOptions).map(option => option.value),

                HematologicAbnormalities: HematologicAbnormalitiesInput.value,
                BloodCountAbnormalities: Array.from(BloodCountAbnormalitiesInput.selectedOptions).map(option => option.value),
                HematologicDiseaseConfirm: hematologicConfirmSelect.value,
                LiverAbnormalityBefore: LiverAbnormalityBeforeInput.value,
                LiverAbnormality: LiverAbnormalityInput.value,
                LiverDisease: LiverDiseaseInput.value,
                LDH: LDHInput.value.trim(),
                ALT: ALTInput.value.trim(),
                AST: ASTInput.value.trim(),
                ALP: ALPInput.value.trim(),
                GGT: GGTInput.value.trim(),
                Transaminitis: TransaminitisInput.value.trim(),
                Cholestasis: CholestasisInput.value.trim(),
                FVC: FVCInput.value.trim(),
                DLCO: DLCOInput.value.trim(),
                FirstDegreeRelative: FirstDegreeRelativeInput.value,
                SecondDegreeRelative: SecondDegreeRelativeInput.value,
                MoreThanOneRelative: MoreThanOneRelativeInput.value,
                GeneticMutation: GeneticMutationInput.value,
                TelomereShorteningSeverity: TelomereShorteningSeverityInput.value.trim()
            };

            // Opcional: Validació addicional si cal

            try {
                const response = await fetch('/save-excel', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const responseData = await response.json();
                    alert(`Respostes enviades correctament! Predicció: ${responseData.predicció}`);
                    // Reiniciar els camps del formulari manualment
                    codNumberInput.value = '';
                    pedigreeInput.value = '';
                    sexInput.value = '';
                    ageDiagnosisInput.value = '';
                    finalDiagnosisInput.value = '';
                    tobaccoHistoryInput.value = '';
                    radiologicalPatternInput.value = '';
                    biopsyInput.value = '';
                    ExtrapulmonaryInput.value = '';
                    LungCancerInput.value = '';
                    OtherCancerInput.value = '';
                    NeoplasiaTypeInput.selectedIndex = -1;
                    HematologicAbnormalitiesInput.value = '';
                    BloodCountAbnormalitiesInput.selectedIndex = -1;
                    hematologicConfirmSelect.value = '';
                    LiverAbnormalityBeforeInput.value = '';
                    LiverAbnormalityInput.value = '';
                    LiverDiseaseInput.value = '';
                    LDHInput.value = '';
                    ALTInput.value = '';
                    ASTInput.value = '';
                    ALPInput.value = '';
                    GGTInput.value = '';
                    TransaminitisInput.value = '';
                    CholestasisInput.value = '';
                    FVCInput.value = '';
                    DLCOInput.value = '';
                    FirstDegreeRelativeInput.value = '';
                    SecondDegreeRelativeInput.value = '';
                    MoreThanOneRelativeInput.value = '';
                    GeneticMutationInput.value = '';
                    TelomereShorteningSeverityInput.value = '';

                    // Reiniciar els missatges d'error
                    userError.style.display = 'none';
                    pedigreeError.style.display = 'none';
                    sexError.style.display = 'none';
                    ageDiagnosisError.style.display = 'none';
                    finalDiagnosisError.style.display = 'none';
                    tobaccoError.style.display = 'none';
                    radiologicalPatternError.style.display = 'none';
                    biopsyError.style.display = 'none';
                    extrapulmonaryError.style.display = 'none';
                    lungcancerError.style.display = 'none';
                    othercancerError.style.display = 'none';
                    neoplasiaError.style.display = 'none';
                    hematologicAbnormalitiesError.style.display = 'none';
                    bloodcountError.style.display = 'none';
                    hematologicConfirmError.style.display = 'none';
                    hematologicTypesError.style.display = 'none';
                    liverabnormalitybeforeError.style.display = 'none';
                    liverabnormalityError.style.display = 'none';
                    liverdiseaseError.style.display = 'none';
                    LDHError.style.display = 'none';
                    ALTError.style.display = 'none';
                    ASTError.style.display = 'none';
                    ALPError.style.display = 'none';
                    GGTError.style.display = 'none';
                    TransaminitisError.style.display = 'none';
                    CholestasisError.style.display = 'none';
                    FVCError.style.display = 'none';
                    DLCOError.style.display = 'none';
                    firstdegreeRelativeError.style.display = 'none';
                    seconddegreeRelativeError.style.display = 'none';
                    morethanonerelativeError.style.display = 'none';
                    geneticMutationError.style.display = 'none';
                    mutationTypeError.style.display = 'none';
                    telomereSeverityError.style.display = 'none';
                    formErrorStep2.style.display = 'none';
                    formErrorStep3.style.display = 'none';
                    formErrorStep4.style.display = 'none';
                    formErrorStep5.style.display = 'none';
                    formErrorStep6.style.display = 'none';
                    formErrorStep7.style.display = 'none';
                    formErrorStep8.style.display = 'none';
                    formErrorStep9.style.display = 'none';
                    formErrorStep10.style.display = 'none';
                    formErrorStep11.style.display = 'none';
                    formErrorStep12.style.display = 'none';

                    // Tornar a la primera secció
                    showStep(step1);
                } else {
                    const errorData = await response.json();
                    alert(`Error: ${errorData.error || 'Hi ha hagut un problema en enviar les dades.'}`);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Hi ha hagut un problema en enviar les dades.');
            }
        });

        // Enrere des de la segona secció a la primera
        backButton2.addEventListener('click', () => {
            showStep(step1);
        });

        // Enrere des de la tercera secció a la segona
        backButton3.addEventListener('click', () => {
            showStep(step2);
        });

        // Enrere des de la quarta secció a la tercera
        backButton4.addEventListener('click', () => {
            showStep(step3);
        });

        // Enrere des de la cinquena secció a la quarta
        backButton5.addEventListener('click', () => {
            showStep(step4);
        });

        // Enrere des de la sisena secció a la cinquena
        backButton6.addEventListener('click', () => {
            showStep(step5);
        });

        // Enrere des de la setena secció a la sisena
        backButton7.addEventListener('click', () => {
            showStep(step6);
        });

        // Enrere des de l'oitava secció a la setena
        backButton8.addEventListener('click', () => {
            showStep(step7);
        });

        // Enrere des de la novena secció a l'oitava
        backButton9.addEventListener('click', () => {
            showStep(step8);
        });

        // Enrere des de la desena secció a la novena
        backButton10.addEventListener('click', () => {
            showStep(step9);
        });

        // Enrere des de la undesena secció a la desena
        backButton11.addEventListener('click', () => {
            showStep(step10);
        });

        // Enrere des de la duodèsima secció a la undesena
        backButton12.addEventListener('click', () => {
            showStep(step11);
        });

        // Permet enviar el primer pas amb la tecla Enter
        codNumberInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                continueButton1.click();
            }
        });

    </script>
</body>
</html>
